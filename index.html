<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bible 300 - Reading Plan & Navigation</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#1f2937">
    <meta name="description" content="A 300-day Bible reading plan with complete KJV Bible navigation">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/ios/180.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/ios/152.png">
    <link rel="apple-touch-icon" sizes="120x120" href="icons/ios/120.png">
    
    <!-- Fonts -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="logo">
                    <i class="fas fa-book-bible"></i>
                    Bible 300
                </h1>
                <nav class="main-nav">
                    <button class="nav-btn" data-tab="reading-plan">
                        <i class="fas fa-calendar-alt"></i>
                        Today
                    </button>
                    <button class="nav-btn" data-tab="overview">
                        <i class="fas fa-list-alt"></i>
                        Overview
                    </button>
                    <button class="nav-btn" data-tab="bible-nav">
                        <i class="fas fa-book"></i>
                        Bible
                    </button>
                    <button class="nav-btn" data-tab="progress">
                        <i class="fas fa-chart-line"></i>
                        Progress
                    </button>
                    <button class="nav-btn" data-tab="settings">
                        <i class="fas fa-cog"></i>
                        Settings
                    </button>
                </nav>
                
                <!-- Dropdown Navigation (hidden by default) -->
                <div class="nav-dropdown" id="nav-dropdown">
                    <button class="nav-dropdown-toggle" id="nav-dropdown-toggle">
                        <i class="fas fa-calendar-alt" id="nav-dropdown-icon"></i>
                        <span id="nav-dropdown-text">Today</span>
                        <i class="fas fa-chevron-down nav-dropdown-arrow"></i>
                    </button>
                    <div class="nav-dropdown-menu" id="nav-dropdown-menu">
                        <button class="nav-dropdown-item" data-tab="reading-plan">
                            <i class="fas fa-calendar-alt"></i>
                            Today
                        </button>
                        <button class="nav-dropdown-item" data-tab="overview">
                            <i class="fas fa-list-alt"></i>
                            Overview
                        </button>
                        <button class="nav-dropdown-item" data-tab="bible-nav">
                            <i class="fas fa-book"></i>
                            Bible
                        </button>
                        <button class="nav-dropdown-item" data-tab="progress">
                            <i class="fas fa-chart-line"></i>
                            Progress
                        </button>
                        <button class="nav-dropdown-item" data-tab="settings">
                            <i class="fas fa-cog"></i>
                            Settings
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Reading Plan Tab -->
            <section id="reading-plan" class="tab-content active">
                <div class="section-header">
                    <h2>300-Day Reading Plan</h2>
                    <div class="day-navigation">
                        <div class="day-counter">
                            <span class="day-label">Day</span>
                            <span class="day-number" id="current-day">1</span>
                            <span class="day-total">of 300</span>
                        </div>
                        <div class="day-controls">
                            <button class="day-nav-btn" id="prev-day">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="day-jump-btn" id="jump-day">
                                <i class="fas fa-calendar-alt"></i>
                                Jump to Day
                            </button>
                            <button class="day-nav-btn" id="next-day">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="reading-card">
                    <div class="reading-header">
                        <h3>Today's Reading</h3>
                        <div class="reading-date" id="reading-date"></div>
                    </div>
                    <div class="reading-categories" id="today-reading">
                        <!-- Daily reading categories will be populated here -->
                    </div>
                    <div class="reading-actions">
                        <button class="complete-btn" id="mark-complete">
                            <i class="fas fa-check"></i>
                            Mark Day Complete
                        </button>
                    </div>
                </div>

                <div class="progress-overview">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0.33%"></div>
                    </div>
                    <div class="progress-text">
                        <span>1 of 300 days completed</span>
                        <span>0.33%</span>
                    </div>
                </div>
            </section>

            <!-- Reading Plan Overview Tab -->
            <section id="overview" class="tab-content">
                <div class="section-header">
                    <h2>Reading Plan Overview</h2>
                    <div class="search-results-text" id="search-results-text" style="display: none;"></div>
                </div>
                
                <div class="overview-search-section">
                    <div class="search-container">
                        <div class="search-input-wrapper">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" id="book-search-input" placeholder="Search for a book" class="search-input">
                        </div>
                        <button id="clear-search-btn" class="clear-btn" style="display: none;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="quick-filters">
                        <button class="filter-btn active" data-filter="all">
                            All Days
                        </button>
                        <button class="filter-btn" data-filter="completed">
                            Completed
                        </button>
                        <button class="filter-btn" data-filter="remaining">
                            Remaining
                        </button>
                    </div>
                </div>

                <div class="days-container" id="days-container">
                    <!-- All 300 days will be populated here -->
                </div>
            </section>

            <!-- Bible Navigation Tab -->
            <section id="bible-nav" class="tab-content">
                <div class="section-header">
                    <h2>Bible Navigation</h2>
                </div>

                <div class="testament-tabs">
                    <button class="testament-btn active" data-testament="old">Old Testament</button>
                    <button class="testament-btn" data-testament="new">New Testament</button>
                </div>

                <div class="books-container" id="books-container">
                    <!-- Books will be populated here grouped by category -->
                </div>
            </section>

            <!-- Progress Tab -->
            <section id="progress" class="tab-content">
                <div class="section-header">
                    <h2>Reading Progress</h2>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="days-completed">1</div>
                            <div class="stat-label">Days Completed</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-times"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="days-missed">0</div>
                            <div class="stat-label">Days Missed</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="completion-percent">0.33%</div>
                            <div class="stat-label">Complete</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="streak-days">1</div>
                            <div class="stat-label">Day Streak</div>
                        </div>
                    </div>
                </div>

                <div class="date-info-container">
                    <h3>Reading Schedule</h3>
                    <div class="date-info-grid">
                        <div class="date-info-item">
                            <div class="date-info-label">Start Date</div>
                            <div class="date-info-value" id="start-date">Jan 1, 2025</div>
                            <button class="change-date-btn" id="change-start-date-btn">
                                <i class="fas fa-edit"></i>
                            </button>
                        </div>
                        <div class="date-info-item">
                            <div class="date-info-label">Expected Finish</div>
                            <div class="date-info-value" id="expected-finish">Oct 27, 2025</div>
                        </div>
                    </div>
                </div>

                <div class="recent-activity-container">
                    <h3 id="recent-activity-header">Recent Activity</h3>
                    <div class="activity-graph" id="activity-graph">
                        <!-- Activity graph will be populated here -->
                    </div>
                    <div class="activity-feed" id="activity-feed">
                        <!-- Recent activity will be populated here -->
                    </div>
                </div>
            </section>

            <!-- Settings Tab -->
            <section id="settings" class="tab-content">
                <div class="section-header">
                    <h2>Settings</h2>
                </div>

                <div class="settings-container">
                    <div class="settings-section">
                        <h3>Reading Preferences</h3>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Words of Christ in Red</label>
                                <p class="setting-description">Display the words of Our Lord in red</p>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="words-of-christ-red" />
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Words of Christ Scope</label>
                                <p class="setting-description">Apply red text to all books or only while Our Lord was on Earth</p>
                            </div>
                            <div class="setting-control">
                                <select id="words-of-christ-scope" class="setting-select">
                                    <option value="earthly" selected>While on Earth</option>
                                    <option value="all">All Books</option>
                                </select>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Font Family</label>
                                <p class="setting-description">Choose your preferred font for reading</p>
                            </div>
                            <div class="setting-control">
                                <select id="font-family-setting" class="setting-select">
                                    <option value="inter" selected>Default</option>
                                    <option value="noto-sans">Noto Sans</option>
                                    <option value="noto-serif">Noto Serif</option>
                                </select>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Font Size</label>
                                <p class="setting-description">Adjust text size for comfortable reading</p>
                            </div>
                            <div class="setting-control">
                                <select id="font-size-setting" class="setting-select">
                                    <option value="small">Small</option>
                                    <option value="medium" selected>Medium</option>
                                    <option value="large">Large</option>
                                    <option value="extra-large">Extra Large</option>
                                </select>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Tab Layout</label>
                                <p class="setting-description">Choose how navigation tabs are displayed</p>
                            </div>
                            <div class="setting-control">
                                <select id="tab-layout-setting" class="setting-select">
                                    <option value="horizontal" selected>Horizontal</option>
                                    <option value="dropdown">Dropdown</option>
                                </select>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Show Floating Navigation Arrows</label>
                                <p class="setting-description">Display floating arrow buttons for chapter navigation</p>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="show-floating-arrows" />
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>


                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Dark Mode</label>
                                <p class="setting-description">Use dark theme for comfortable reading in low light</p>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="dark-mode" checked />
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>


                    <div class="settings-section">
                        <h3>Data Management</h3>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Recent Activity View</label>
                                <p class="setting-description">Choose how recent activity is displayed</p>
                            </div>
                            <div class="setting-control">
                                <select id="recent-activity-view" class="setting-select">
                                    <option value="last-7-days">Last 7 Days</option>
                                    <option value="current-week" selected>Current Week</option>
                                </select>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Show Activity Graph</label>
                                <p class="setting-description">Display visual activity status</p>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="show-activity-graph" checked />
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Export Progress</label>
                                <p class="setting-description">Download a backup of your reading progress</p>
                            </div>
                            <div class="setting-control">
                                <button class="setting-btn secondary" id="export-progress">
                                    <i class="fas fa-download"></i>
                                    Export
                                </button>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Import Progress</label>
                                <p class="setting-description">Restore progress from a backup file</p>
                            </div>
                            <div class="setting-control">
                                <button class="setting-btn secondary" id="import-progress">
                                    <i class="fas fa-upload"></i>
                                    Import
                                </button>
                                <input type="file" id="import-file" accept=".json" style="display: none;" />
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Reset All Data</label>
                                <p class="setting-description">Clear all progress and start over (cannot be undone)</p>
                            </div>
                            <div class="setting-control">
                                <button class="setting-btn danger" id="reset-all-data">
                                    <i class="fas fa-trash-alt"></i>
                                    Reset
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>About</h3>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">App Version</label>
                                <p class="setting-description">Bible 300 PWA v2.1.0</p>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Bible Translation</label>
                                <p class="setting-description">King James Version (KJV) - Catholic Edition</p>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Icons</label>
                                <p class="setting-description">Interface icons provided by Font Awesome</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Bible Reader Modal -->
        <div id="bible-reader" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <button class="chapter-selector-header" id="chapter-selector-header">
                        <span id="reader-title"></span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <button class="close-btn" id="close-reader">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="reader-content" class="reader-content">
                        <!-- Bible content will be loaded here -->
                    </div>
                </div>
                
                <!-- Floating Navigation Arrows -->
                <div id="floating-arrows" class="floating-arrows">
                    <button id="floating-prev" class="floating-arrow-btn prev-btn">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button id="floating-next" class="floating-arrow-btn next-btn">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
            
            <!-- Chapter Selection Menu -->
            <div id="chapter-menu" class="chapter-menu">
                <div class="chapter-menu-header">
                    <span id="chapter-menu-title">Select Chapter</span>
                </div>
                <div id="chapter-grid" class="chapter-grid">
                    <!-- Chapter buttons will be populated here -->
                </div>
            </div>
        </div>

        <!-- Day Jump Modal -->
        <div id="day-jump-modal" class="modal">
            <div class="modal-content small-modal">
                <div class="modal-header">
                    <h3>Jump to Day</h3>
                    <button class="close-btn" id="close-day-jump">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="day-jump-form">
                        <label for="day-input">Enter day number (1-300):</label>
                        <input type="number" id="day-input" min="1" max="300" placeholder="Enter day..." />
                        <div class="day-jump-actions">
                            <button class="cancel-btn" id="cancel-day-jump-btn">Cancel</button>
                            <button class="jump-btn" id="confirm-jump-btn">Jump to Day</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Start Date Modal -->
        <div id="start-date-modal" class="modal">
            <div class="modal-content small-modal">
                <div class="modal-header">
                    <h3>Change Start Date</h3>
                    <button class="close-btn" id="close-start-date">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="start-date-form">
                        <label for="start-date-input">Select start date:</label>
                        <input type="date" id="start-date-input" />
                        <div class="start-date-actions">
                            <button class="cancel-btn" id="cancel-start-date-btn">Cancel</button>
                            <button class="jump-btn" id="update-start-date-btn">Change Start Date</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reset Data Modal -->
        <div id="reset-data-modal" class="modal">
            <div class="modal-content small-modal">
                <div class="modal-header">
                    <h3>Reset All Data</h3>
                    <button class="close-btn" id="close-reset-data">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="reset-data-form">
                        <div class="reset-warning">
                            <i class="fas fa-exclamation-triangle"></i>
                            <p>This will permanently delete all your reading progress, including:</p>
                            <ul>
                                <li>Completed days and categories</li>
                                <li>Current day position</li>
                                <li>Start date</li>
                                <li>All progress statistics</li>
                            </ul>
                            <p><strong>This action cannot be undone.</strong></p>
                        </div>
                        <div class="reset-data-actions">
                            <button class="cancel-btn" id="cancel-reset-data-btn">Cancel</button>
                            <button class="danger-btn" id="confirm-reset-data-btn">Reset All Data</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="data/reading-plan.js"></script>
    <script src="data/bible-text.js"></script>
    <script src="js/app.js"></script>
    <script>
        // Register service worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => console.log('SW registered'))
                    .catch(error => console.log('SW registration failed'));
            });
        }
    </script>
</body>
</html>